<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>Qgis Modeler</title>
    <link rel="shortcut icon" href="./favicon.ico" />
    <link rel="stylesheet" href="./dist/reset.css" />
    <link rel="stylesheet" href="./dist/reveal.css" />
    <link rel="stylesheet" href="./_assets/stylesheets/pitch-theme.css" id="theme" />
    <link rel="stylesheet" href="./css/highlight/base16/zenburn.css" />

  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section data-markdown data-separator="\r?\n---\r?\n" data-separator-vertical="--v--">
          <textarea data-template>
            

## Traitement dans QGIS : Techniques et outils avancés d'analyse géospatiale

---

### Objectifs de l'atelier

- Présentation du modeleur
- Mise en pratique
  - Création d'un modèle traitant du raster
  - Création d'un modèle traitant des données vectorielles
- Traitement par lots
- Diverses façons de mettre à disposition le modèle
- Conclusion

---

### Présentation du modeleur

--v--

![Sauvegarde](assets/1_sauvegarde.png)

--v--

![Navigation](assets/2_navigation.png)

--v--

![Export](assets/3_export.png)

--v--

![Execution](assets/4_execution.png)

--v--

![Entrées](assets/5_entrees.png)

--v--

![Algorithmes](assets/6_algorithmes.png)

--v--

![Propriétés](assets/7_proprietes.png)

--v--

![Variables](assets/8_variables.png)

--v--

![Historique](assets/9_historique.png)

---

### Mise en pratique

Mission meilleurs emplacements pour les ruches de Maya l'apicultrice !

Aider Maya, apicultrice à Lavertezzo, à trouver les emplacements parfaits pour ses nouvelles ruches.

![Maya](assets/maya_apicultrice.png)

--v--

#### Plan d'action

1. Analyse de données raster
   - Exposition de la zone
2. Analyse de données vectorielle
Respecter les conditions suivantes :
   - Maximum 50 mètres de la forêt
   - Maximum 100 mètres d'un arrêt de transport public

---

#### Analyse de données raster

Exposition de la zone.

--v--

- Données : area, swissALTI3D
- Extension : Swiss Geo Downloader

--v--

Télécharger les données "swissALTI3D" de la zone

![Swiss Geo Downloader](assets/swiss_geo_downloader.png)

--v--

##### Etapes du modèle

1. Donner le nom au modèle `exposition_raster`
2. Enregistrer le modèle dans le projet ![Enregistrer le modèle dans le projet ](assets/enregistrer_dans_projet.png)
3. Ajouter l'algorithme GDAL "Fusion"
   - Couches en entrée, sélectionner les quatre tuiles de swissALTI3D
4. Ajouter l'algorithme "Exposition
   - Sous "Exposition" donner le nom `exposition_zone` (ceci donne le nom de la couche en sortie)
![Algorithme exposition](assets/algorithme_exposition.png)

--v--

5. Ajouter l'algorithme "Appliquer le style"
   - Couche, changer `Entrée du modèle` par `Sortir d'un algorithme`, mettre la valeur "Exposition" ![Algorithme exposition](assets/entree_modele.png)
   - Ajouter une entrée "Fichier/Dossier" 
   - Changer dans l'algorithme "Appliquer le style", "Fichier de style" avec `Entrée du modèle`, mettre la valeur `style exposition`
6. Enregistrer le modèle dans le projet

**Résultat**

| Modeleur | Paramètres d'exécution |
|----------|------------------------|
| ![Résultat modeleur](assets/raster_resultat_modeleur.png) | ![Paramètres modeleur](assets/raster_resultat_parametres_modeleur.png) |

---

#### Analyse de données vectorielles

Recoupement de deux zones tampons de 50 mètres de la forêt et 100 mètres des transports public.

--v--

- Données : area, land cover, PT

--v--

##### Etapes du modèle

1. Donner le nom au modèle `traitement_vectoriel`
2. Enregistrer le modèle dans le projet ![Enregister le modèle dans le projet ](assets/enregistrer_dans_projet.png)
3. Ajouter une entrée "Couche vecteur"
   - Description `Couverture du sol`
   - Type de géométrie `Polygone`
4. Ajouter une entrée "Couche vecteur"
   - Description `area`
   - Type de géométrie `Polygone`
5. Ajouter une autre entrée "Couche vecteur"
   - Description `PT`
   - Type de géométrie `Point`
6. Ajouter l'algorithme "Filtre d'entité"
   - Couche source, utiliser `Entrée du modèle`, mettre la valeur `Couverture du sol`
   - Sortie et filtres, ajouter une entrée avec "Nom de la sortie" = `foret` et "Expression de filtre" `"objektart" = 'Wald'` ![Algorithme filtre](assets/algorithme_filtre.png)

--v--

7. Ajouter l'algorithme "Couper"
   - Couche source, utiliser `Sortie d'un algorithme`, mettre la valeur `foret`
   - Couche de superposition, utiliser `Entrée du modèle`, mettre la valeur `area`
8. Ajouter l'algorithme "Tampon"
   - Description, mettre la valeur `Tampon foret`
   - Couche source, utiliser `Sortie d'un algorithme`, mettre la valeur `Découpé`
   - Ajouter une entrée "Nombre" ![Entrée nombre](assets/entree_nombre.png)
   - Distance, utiliser `Entrée du modèle`, mettre la valeur `taille_tampon_foret`

--v--

9. Ajouter l'algorithme "Tampon"
   - Description, mettre la valeur `Tampon TP`
   - Couche source, utiliser `Entrée du modèle`, mettre la valeur `TP`
   - Ajouter une entrée "Nombre"
   - Distance, utiliser `Entrée du modèle`, mettre la valeur `taille_tampon_TP`
10. Ajouter l'algorithme "Intersection"
    - Couche source, utiliser `Sortie d'un algorithme`, mettre la valeur `Tampon foret`
    - Couche de superposition, utiliser `Sortie d'un algorithme`, mettre la valeur `Tampon TP`
    - Intersection, mettre `meilleur_emplacement`
11. Enregistrer

--v--

**Résultat**

| Modeleur | Paramètres d'exécution |
|----------|------------------------|
| ![Résultat modeleur](assets/vecteur_resultat_modeleur.png) | ![Paramètres modeleur](assets/vecteur_resultat_parametres_modeleur.png) |

--v--

![Résultat graphique](assets/resultat_graphique.png)

---

### Traitement par lots

Maintenant que nous avons deux outils, il est possible de le exectuer sur des données par lots.

- Le traitement par lot permet d'exécuter un modèle sur plusieurs jeux de données automatiquement, sans intervention manuelle entre chaque exécution.
- Cela est particulièrement utile pour appliquer un même processus à de multiples fichiers ou couches de données géographiques.

--v--

#### Comment executer un traitement par lot

1. Executer l'outil
2. Cliquer sur "Exécuter comme processus de lot... 
![Traitement par lots](assets/traitement_lot.png)

--v--

3. Ajouter les informations des différents lots

![Traitement par lots](assets/traitement_lot_fenetre.png)

--v--

#### Avantages du traitement par lot

- **Efficacité** : Permet de traiter de grandes quantités de données en une seule opération.
- **Consistance** : Assure que les mêmes paramètres et méthodes sont appliqués de manière uniforme à tous les jeux de données.
- **Gain de Temps** : Réduit le temps passé à répéter les mêmes étapes manuellement pour chaque fichier ou couche.

---

### Diverses façons de mettre à disposition le modèle

- Enregistrer dans le projet
  - il se retrouve dans la boîte à outils
![Enregistrer dans le projet](assets/enregistrer_projet_situation.png)

   - Avec le clic droit, il est possible d'accéder à plusieurs options ![Modèle projet clic droit](assets/modele_projet_clic_droit.png)

--v--

- Enregistrer le modèle sous le format `model3` ![Enregistrer sous format model3](assets/enregistrer_format.png)

--v--

- Exporter comme script Python ![Export Python](assets/export_python.png)
  - Dès que l'export est fait, il n'est plus possible d'utiliser le script dans le Modeleur.
- Exporter comme image ![Export image](assets/export_image.png)
- Exporter au format PDF ![Export PDF](assets/export_pdf.png)
- Exporter au format SVG ![Export SVG](assets/export_svg.png) 

---

### Conclusion

QGIS Modeleur est un outil puissant pour automatiser et optimiser des analyses géospatiales.

Il offre de nombreux avantages à savoir :

- Automatisation de tâches complexes 
<!--- Simplifiez des workflows complexes en regroupant plusieurs opérations en un seul modèle. Gagnez du temps et réduisez les erreurs en automatisant les tâches répétitives.--->

- Gain d'efficacité et de reproductibilité
<!--- Optimisez vos analyses et assurez la cohérence des résultats en utilisant des modèles standardisés. --->

- Flexibilité et personnalisation
<!--- Adaptez les modèles à vos besoins spécifiques en utilisant des expressions, des variables et des paramètres. --->

- Partage et collaboration 
<!--- Facilitez le partage de vos modèles avec d'autres utilisateurs et encouragez la collaboration au sein de votre équipe. --->

          </textarea>
        </section>
      </div>
    </div>

    <script src="./dist/reveal.js"></script>

    <script src="./mermaid/dist/mermaid.min.js"></script>

    <script src="./plugin/markdown/markdown.js"></script>
    <script src="./plugin/highlight/highlight.js"></script>
    <script src="./plugin/zoom/zoom.js"></script>
    <script src="./plugin/notes/notes.js"></script>
    <script src="./plugin/math/math.js"></script>
    <script>
      function extend() {
        var target = {};
        for (var i = 0; i < arguments.length; i++) {
          var source = arguments[i];
          for (var key in source) {
            if (source.hasOwnProperty(key)) {
              target[key] = source[key];
            }
          }
        }
        return target;
      }

      // default options to init reveal.js
      var defaultOptions = {
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'default', // none/fade/slide/convex/concave/zoom
        slideNumber: true,
        highlight: {
          highlightOnLoad: false
        },
        plugins: [
          RevealMarkdown,
          RevealHighlight,
          RevealZoom,
          RevealNotes,
          RevealMath
        ]
      };

      // options from URL query string
      var queryOptions = Reveal().getQueryHash() || {};

      var options = extend(defaultOptions, {"transition":"none","slideNumber":false,"overview":true,"autoPlayMedia":true,"_":["slides/"],"static":"web","static-dirs":"slides/assets","staticDirs":"slides/assets","listing-template":"../globals/index/index.html","listingTemplate":"../globals/index/index.html","title":"Qgis Modeler"}, queryOptions);
    </script>


    <script>
      Reveal.initialize(options);
      Reveal.addEventListener('ready', function (event) {
        const blocks = Reveal.getRevealElement().querySelectorAll('pre code:not(.mermaid)');
        const hlp = Reveal.getPlugin('highlight');
        blocks.forEach(hlp.highlightBlock);
      });
    </script>

    <script>
      const mermaidOptions = extend({ startOnLoad: false }, {});
      mermaid.startOnLoad = false;
      mermaid.initialize(mermaidOptions);
      const cb = function (event) { mermaid.init(mermaidOptions, '.stack.present>.present pre code.mermaid'); };
      Reveal.addEventListener('ready', cb);
      Reveal.addEventListener('slidetransitionend', cb);
    </script>
  </body>
</html>
