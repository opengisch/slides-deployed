<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>Qgis Modeler</title>
    <link rel="shortcut icon" href="./favicon.ico" />
    <link rel="stylesheet" href="./dist/reset.css" />
    <link rel="stylesheet" href="./dist/reveal.css" />
    <link rel="stylesheet" href="./_assets/stylesheets/pitch-theme.css" id="theme" />
    <link rel="stylesheet" href="./css/highlight/base16/zenburn.css" />

  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section data-markdown data-separator="\r?\n---\r?\n" data-separator-vertical="--v--">
          <textarea data-template>
            

### Processing in QGIS: Advanced Geospatial Analysis Techniques and Tools

---

### Workshop Objectives

- Introduction to the modeler
  - Practical application
- Creating a raster data processing model
- Creating a vector data processing model
- Batch processing
- Various ways to share the model
- Conclusion & Outlook

---

### Introduction to the Modeler

--v--

![Sauvegarde](assets/1_sauvegarde.png)

--v--

![Navigation](assets/2_navigation.png)

--v--

![Export](assets/3_export.png)

--v--

![Execution](assets/4_execution.png)

--v--

![Entr√©es](assets/5_entrees.png)

--v--

![Algorithmes](assets/6_algorithmes.png)

--v--

![Propri√©t√©s](assets/7_proprietes.png)

--v--

![Variables](assets/8_variables.png)

--v--

![Historique](assets/9_historique.png)

---

### Practical Application

Mission: Find the best locations for Maya the beekeeper's hives!

Help Maya, a beekeeper in Lavertezzo, find the perfect spots for her new hives.

<img src="assets/maya_apicultrice.png" style="height: 8em" alt="Maya" />

--v--

#### Action Plan

1. Raster data analysis
   - Area exposure
2. Vector data analysis
Must meet the following conditions:
   - Maximum 50 meters from the forest
   - Maximum 100 meters from a public transport stop

---

#### Raster Data Analysis

Area exposure.

--v--



- Project Download: <a href="https://tinyurl.com/mrvhz7k4" target="_blank" style="font-family: monospace;">https://tinyurl.com/mrvhz7k4</a><br ><br />
- Data
  - Layer " `area` "
  - swissALTI3D
    - via Plugin : <a href="https://plugins.qgis.org/plugins/swissgeodownloader/" target="_blank">Swiss Geo Downloader</a>

--v--

Download the "swissALTI3D" data for the area

![Swiss Geo Downloader](assets/swiss_geo_downloader_en.png)

--v--

##### Modeling steps

###### Create the model

<br />

1. Name the model `exposure_raster`
2. Save the model in the project ![Save the model in the project](assets/enregistrer_dans_projet.png)

--v--

##### Modeling steps

###### Merge the swissALTI3D layers

<br />

3. Add the GDAL algorithm "Merge"
   - Input layers: select the four tiles of swissALTI3D
   - Click "Show advances parameters"
     - Under "Additional Command line parameters", add:
       - `-of GTiff`

--v--

##### Modeling steps

###### Aspect ("Perspektive")

<br />

4. Add the "aspect" algorithm
   - Under "Aspect" name it `exposure` (this will be the output layer name)

<img alt="aspect algorithm" src="assets/algorithme_exposition_en.png" style="height: 10em;">

--v--

##### Modeling steps

###### Style the result

5. Add the "Apply Style" algorithm
   - Layer: change `Model Input` to `Algorithm Output`, set the value to "Exposure"  !["aspect" algorithm](assets/entree_modele_en.png)
   - Add an "File/Folder" input 
   - In the "Apply Style" algorithm, change "Style File" to `Model Input`, set the value to `style exposure`
6. Save the model in the project

--v--

**Result**

| Model | Parameters |
|----------|------------------------|
| ![model result](assets/raster_resultat_modeleur_en.png) | ![Model Parameters](assets/raster_resultat_parametres_modeleur_en.png) |

---

#### Vector Data Analysis

<br />

Overlay of two buffer zones:

- <b>50 meters from the forest</b>
- <b>100 meters from public transport.</b>

--v--

##### Model Input

<br />

- Data
  - Layer " `area` ",
  - Layer " `land cover` "
  - Layer " `PT` "

--v--

##### Model Steps

###### Create the model

<br />

1. Name the model `vector_process`
2. Save the model in the project ![Save the model in the project](assets/enregistrer_dans_projet.png)

--v--

##### Model Steps

###### Model input

<br />


3. Add a "Vector Layer" input
   - Description `Land Cover`
   - Geometry type `Polygon`
4. Add a "Vector Layer" input
   - Description `area`
   - Geometry type `Polygon`
5. Add a "Vector Layer" input
   - Description `PT`
   - Geometry type `Point`

--v--

##### Model Steps

###### Model input

<br />

6. Add the "Feature Filter" algorithm <img alt="Algorithme filtre" src="assets/algorithme_filtre_en.png" style="float: right;height: 10em;padding-left:2em;" />
   - Source layer: use `Model Input`, set the value to `Land Cover`
   - Output and filters: add an output with "Output Name" = `forest` and "Filter Expression" `"objektart" = 'Wald'`

--v--

7. Add the "Clip" algorithm
   - Source layer: use `Algorithm Output`, set the value to `forest`
   - Overlay layer: use `Model Input`, set the value to `area`

--v--

8. Add the "Buffer" algorithm
   - Description: set the value to `Forest Buffer`
   - Source layer: use `Algorithm Output`, set the value to `Clipped`
   - Add a "Number" input, description `forest_buffer_size` <img alt="Entr√©e nombre" src="assets/entree_nombre_en.png" style="float: right;height: 10em">
   - Distance: use `Model Input`, set the value to `forest_buffer_size`

--v--

9. Add the "Buffer" algorithm
   - Description: set the value to `PT Buffer`
   - Source layer: use `Model Input`, set the value to `PT`
   - Add a "Number" input, description `PT_buffer_size` 
   - Distance: use `Model Input`, set the value to `pt_buffer_size`
10. Add the "Intersection" algorithm
    - Source layer: use `Algorithm Output`, set the value to `Forest Buffer`
    - Overlay layer: use `Algorithm Output`, set the value to `PT Buffer`
    - ntersection: set `best_location`
11. Save

--v--

**Result**

| Model | Parameters |
|----------|------------------------|
| ![model result](assets/vecteur_resultat_modeleur_en.png) | ![Model Parameters](assets/vecteur_resultat_parametres_modeleur_en.png) |

--v--

<img alt="graph result" src="assets/resultat_graphique.png" style="height: 50vh" >

---

### Batch Processing

Now that we have two tools, they can be executed on batch data.

- Batch processing allows running a model on multiple datasets automatically, without manual intervention between each execution.
- This is particularly useful for applying the same process to multiple files or geographic data layers.

--v--

#### How to Execute a Batch Process

1. Execute the tool <img alt="Batch processing" src="assets/traitement_lot_en.png" style="float: right; height: 10em; padding-left: 4em" >
2. Click "Execute as batch process..." 

--v--

3. Add the information for different batches

![Batch processing](assets/traitement_lot_fenetre_en.png)

--v--

#### Advantages of Batch Processing

- **Efficiency** : Allows processing large amounts of data in a single operation.
- **Consistency** : Ensures the same parameters and methods are uniformly applied to all datasets.
- **Time-saving** : Reduces the time spent repeating the same steps manually for each file or layer.

---

### Various Ways to Share the Model

- Save in the project <img alt="save in the project" src="assets/enregistrer_projet_situation_en.png" style="float:right;height: 8em;">
  - It appears in the toolbox

   - Right-click to access several options  <img alt="Right-click options" src="assets/modele_projet_clic_droit_en.png" style="float: left; height: 4em">

--v--

- Save the model as `model3` format <br />![Enregistrer sous format model3](assets/enregistrer_format.png)

--v--

- Export as a Python script  ![Export Python](assets/export_python.png)
  - Once exported, the script can no longer be used in the Modeler...
- Export as an image ![Export image](assets/export_image.png)
- Export as a PDF. (This is not working well) ![Export PDF](assets/export_pdf.png)
- Export as an SVG ![Export SVG](assets/export_svg.png) 

---

### Conclusion

QGIS Modeler is a powerful tool for automating and optimizing geospatial analyses.

It offers many advantages...

--v--

#### Task automation

Simplify complex workflows by grouping multiple operations into a single model. Save time and reduce errors by automating repetitive tasks.


--v--

#### Increased efficiency and reproducibility


Optimize your analyses and ensure consistent results using standardized models.

--v--

#### Flexibility and customization

Adapt models to your specific needs using expressions, variables, and parameters.

--v--

#### Sharing and collaboration

Facilitate sharing your models with others and encourage collaboration within your team.

---

### Outlook

- Example of a large model
- Add more algorithms via Plugins
- Python scripts as algorithm
- Ideas and missing features

--v--

#### Example of a large model

<a href="assets/model3_Trassenkosten-Ermittlung.pdf" target="_blank">
   <img alt="Example of a large model" src="assets/screenshot_large_model.png" style="height: 10em;float:left">
</a>

<img alt="Result of a large model" src="assets/result_large_model.png" style="height: 10em;float:right">

--v--

#### Add more algorithms via Plugins

<a href="https://plugins.qgis.org/plugins/tags/processing/" target="_blank">https://plugins.qgis.org/plugins/tags/processing/</a>

--v--

#### Python scripts as algorithm

--v--

#### Discussion: <br /> Ideas and missing features


---

### End üòä

<br>

##### Thanks for your participation üôè


<br>

##### Time for questions and discussion ‚ùì
          </textarea>
        </section>
      </div>
    </div>

    <script src="./dist/reveal.js"></script>

    <script src="./mermaid/dist/mermaid.min.js"></script>

    <script src="./plugin/markdown/markdown.js"></script>
    <script src="./plugin/highlight/highlight.js"></script>
    <script src="./plugin/zoom/zoom.js"></script>
    <script src="./plugin/notes/notes.js"></script>
    <script src="./plugin/math/math.js"></script>
    <script>
      function extend() {
        var target = {};
        for (var i = 0; i < arguments.length; i++) {
          var source = arguments[i];
          for (var key in source) {
            if (source.hasOwnProperty(key)) {
              target[key] = source[key];
            }
          }
        }
        return target;
      }

      // default options to init reveal.js
      var defaultOptions = {
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'default', // none/fade/slide/convex/concave/zoom
        slideNumber: true,
        highlight: {
          highlightOnLoad: false
        },
        plugins: [
          RevealMarkdown,
          RevealHighlight,
          RevealZoom,
          RevealNotes,
          RevealMath
        ]
      };

      // options from URL query string
      var queryOptions = Reveal().getQueryHash() || {};

      var options = extend(defaultOptions, {"transition":"none","slideNumber":false,"overview":true,"autoPlayMedia":true,"_":["slides/"],"static":"web","static-dirs":"slides/assets","staticDirs":"slides/assets","listing-template":"../globals/index/index.html","listingTemplate":"../globals/index/index.html","title":"Qgis Modeler"}, queryOptions);
    </script>


    <script>
      Reveal.initialize(options);
      Reveal.addEventListener('ready', function (event) {
        const blocks = Reveal.getRevealElement().querySelectorAll('pre code:not(.mermaid)');
        const hlp = Reveal.getPlugin('highlight');
        blocks.forEach(hlp.highlightBlock);
      });
    </script>

    <script>
      const mermaidOptions = extend({ startOnLoad: false }, {});
      mermaid.startOnLoad = false;
      mermaid.initialize(mermaidOptions);
      const cb = function (event) { mermaid.init(mermaidOptions, '.stack.present>.present pre code.mermaid'); };
      Reveal.addEventListener('ready', cb);
      Reveal.addEventListener('slidetransitionend', cb);
    </script>
  </body>
</html>
